<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>观察者模式 on star徐的博客</title><link>http://ljj1992.fun/tags/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/</link><description>Recent content in 观察者模式 on star徐的博客</description><generator>Hugo -- 0.155.2</generator><language>zh-cn</language><lastBuildDate>Thu, 20 Nov 2025 15:36:00 +0800</lastBuildDate><atom:link href="http://ljj1992.fun/tags/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/index.xml" rel="self" type="application/rss+xml"/><item><title>观察者模式(YouTuber订阅)</title><link>http://ljj1992.fun/posts/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/</link><pubDate>Thu, 20 Nov 2025 15:36:00 +0800</pubDate><guid>http://ljj1992.fun/posts/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/</guid><description>&lt;h1 id="观察者模式youtuber订阅"&gt;观察者模式(YouTuber订阅)&lt;/h1&gt;
&lt;h2 id="一观察者模式到底是干嘛的为什么会有人发明它"&gt;一、观察者模式到底是干嘛的？为什么会有人发明它？&lt;/h2&gt;
&lt;p&gt;想象一下现实生活中的场景：&lt;/p&gt;
&lt;p&gt;你很喜欢某个YouTuber（比如“老王”），于是你点了一下“订阅”按钮。 以后老王每发一个新视频，YouTube 就会自动给你推送通知，你不用每时每刻去他的主页刷新看他发没发视频。&lt;/p&gt;
&lt;p&gt;这里的关键问题就是：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;“一个对象（YouTuber）的状态变了，怎么让一大堆关心它的对象（粉丝）立刻知道，并且各自做出反应？”&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如果没有观察者模式，我们会怎么做？最笨的办法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;老王每次发视频后，自己记住所有粉丝的电话，一个一个打电话通知；&lt;/li&gt;
&lt;li&gt;或者每个粉丝自己写一个死循环，每隔10秒去老王的主页看一遍有没有新视频（浪费资源，还不及时）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这两种方式都很蠢，观察者模式就是为了优雅地解决这个问题而诞生的。&lt;/p&gt;
&lt;h3 id="观察者模式解决的核心痛点"&gt;观察者模式解决的核心痛点：&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;解耦&lt;/strong&gt;：主题（YouTuber）不需要知道粉丝具体是谁、怎么通知，只需要知道“我有一堆订阅者，出事了就告诉他们”。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;一对多依赖&lt;/strong&gt;：一个主题可以有 0个、1个、10000个观察者，增删都非常方便。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;动态订阅/退订&lt;/strong&gt;：粉丝可以随时订阅、随时取关，主题完全不关心。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;松耦合&lt;/strong&gt;：主题和观察者只通过一个约定的接口（update方法）沟通，互不依赖具体实现。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;一句话总结： &lt;strong&gt;当一个对象的状态改变需要通知给其他众多对象，并且这些对象可能随时增删时，就用观察者模式。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id="二经典使用场景你以后一定会遇到"&gt;二、经典使用场景（你以后一定会遇到）&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;聊天软件：有人发消息，所有在线好友收到通知&lt;/li&gt;
&lt;li&gt;股票软件：股价变动，所有关注这只股票的人收到推送&lt;/li&gt;
&lt;li&gt;GUI界面：点击按钮，所有注册了点击事件的监听器执行&lt;/li&gt;
&lt;li&gt;消息队列、事件总线（EventBus）&lt;/li&gt;
&lt;li&gt;Vue/React 中的数据响应式（本质也是观察者）&lt;/li&gt;
&lt;li&gt;Python 中的信号槽（PyQt/PySide）、Java 中的 Listener&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="三用大白话理解观察者模式的四个核心角色"&gt;三、用大白话理解观察者模式的四个核心角色&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;角色&lt;/th&gt;
&lt;th&gt;现实中对应&lt;/th&gt;
&lt;th&gt;代码中对应&lt;/th&gt;
&lt;th&gt;职责&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Subject（主题）&lt;/td&gt;
&lt;td&gt;YouTuber&lt;/td&gt;
&lt;td&gt;Youtuber 类&lt;/td&gt;
&lt;td&gt;维护订阅者列表，提供 attach/detach/notify 方法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Observer（观察者接口）&lt;/td&gt;
&lt;td&gt;“订阅后必须能收到通知”这个约定&lt;/td&gt;
&lt;td&gt;Observer 抽象类&lt;/td&gt;
&lt;td&gt;定义 update 方法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ConcreteObserver（具体观察者）&lt;/td&gt;
&lt;td&gt;具体的粉丝小明、小红&lt;/td&gt;
&lt;td&gt;Fan 类&lt;/td&gt;
&lt;td&gt;实现 update，真正干活的地方&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Client（客户代码）&lt;/td&gt;
&lt;td&gt;我们写的主程序&lt;/td&gt;
&lt;td&gt;最后的运行逻辑&lt;/td&gt;
&lt;td&gt;创建对象、订阅、触发通知&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="四代码分析"&gt;四、代码分析&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# -------------------------------------------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 步骤1：定义“主题”（Youtuber）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# -------------------------------------------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Youtuber&lt;/span&gt;: &lt;span style="color:#75715e"&gt;# 定义一个类，名叫 Youtuber，代表“被订阅的对象”&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__init__&lt;/span&gt;(self, name): &lt;span style="color:#75715e"&gt;# 构造函数，创建对象时自动执行&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;name &lt;span style="color:#f92672"&gt;=&lt;/span&gt; name &lt;span style="color:#75715e"&gt;# 给这个YouTuber起个名字，比如“老王”&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;_observers &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [] &lt;span style="color:#75715e"&gt;# 核心：一个“订阅者列表”，_ 开头通常表示内部使用，不建议外部直接访问&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# [] 表示创建一个空列表，用来装所有粉丝对象&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;attach&lt;/span&gt;(self, observer): &lt;span style="color:#75715e"&gt;# “订阅”方法，参数 observer 就是一个粉丝对象&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&amp;#34;添加一个观察者（订阅）&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; observer &lt;span style="color:#f92672"&gt;not&lt;/span&gt; &lt;span style="color:#f92672"&gt;in&lt;/span&gt; self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;_observers: &lt;span style="color:#75715e"&gt;# 判断这个粉丝是否已经订阅过，防止重复&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;_observers&lt;span style="color:#f92672"&gt;.&lt;/span&gt;append(observer) &lt;span style="color:#75715e"&gt;# append 是列表的内置方法，把粉丝对象加到列表末尾&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; print(&lt;span style="color:#e6db74"&gt;f&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;[&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;observer&lt;span style="color:#f92672"&gt;.&lt;/span&gt;name&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;] 订阅了 [&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;name&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;]&amp;#34;&lt;/span&gt;) &lt;span style="color:#75715e"&gt;# 打印一条提示信息&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;detach&lt;/span&gt;(self, observer): &lt;span style="color:#75715e"&gt;# “取消订阅”方法&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&amp;#34;移除一个观察者（取消订阅）&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;try&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;_observers&lt;span style="color:#f92672"&gt;.&lt;/span&gt;remove(observer) &lt;span style="color:#75715e"&gt;# remove 是列表的内置方法，直接删除这个对象&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; print(&lt;span style="color:#e6db74"&gt;f&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;[&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;observer&lt;span style="color:#f92672"&gt;.&lt;/span&gt;name&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;] 取消订阅了 [&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;name&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;]&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;except&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ValueError&lt;/span&gt;: &lt;span style="color:#75715e"&gt;# 如果列表里根本没有这个对象，remove 会报错&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;pass&lt;/span&gt; &lt;span style="color:#75715e"&gt;# 我们选择忽略这个错误，什么都不做&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;notify&lt;/span&gt;(self, video_title): &lt;span style="color:#75715e"&gt;# 最最重要的“发布视频”方法，也就是状态发生变化&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&amp;#34;通知所有观察者&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; print(&lt;span style="color:#e6db74"&gt;f&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;\n&lt;/span&gt;&lt;span style="color:#e6db74"&gt;[&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;name&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;] 发布了新视频: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;video_title&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;！正在通知所有订阅者...&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; observer &lt;span style="color:#f92672"&gt;in&lt;/span&gt; self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;_observers: &lt;span style="color:#75715e"&gt;# 遍历当前所有的粉丝对象&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; observer&lt;span style="color:#f92672"&gt;.&lt;/span&gt;update(self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;name, video_title) &lt;span style="color:#75715e"&gt;# **核心中的核心！**&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# 调用每个粉丝的 update 方法，把视频信息告诉他&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# -------------------------------------------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 步骤2：定义“观察者”模板和具体观察者（粉丝）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# -------------------------------------------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; abc &lt;span style="color:#f92672"&gt;import&lt;/span&gt; ABC, abstractmethod &lt;span style="color:#75715e"&gt;# 从 abc 模块导入工具，用来创建抽象类&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Observer&lt;/span&gt;(ABC): &lt;span style="color:#75715e"&gt;# 定义一个抽象基类（模板），所有观察者都必须遵守&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;@abstractmethod&lt;/span&gt; &lt;span style="color:#75715e"&gt;# 装饰器：表示下面的方法是“抽象方法”，子类必须实现&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;update&lt;/span&gt;(self, youtuber_name, video_title): &lt;span style="color:#75715e"&gt;# 抽象方法，只定义签名，不写具体内容&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;pass&lt;/span&gt; &lt;span style="color:#75715e"&gt;# pass 表示“占个位置，啥也不干”&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Fan&lt;/span&gt;(Observer): &lt;span style="color:#75715e"&gt;# Fan 类继承 Observer，代表具体的粉丝&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__init__&lt;/span&gt;(self, name):
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;name &lt;span style="color:#f92672"&gt;=&lt;/span&gt; name &lt;span style="color:#75715e"&gt;# 每个粉丝也有自己的名字&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;update&lt;/span&gt;(self, youtuber_name, video_title): &lt;span style="color:#75715e"&gt;# 必须实现父类的抽象方法，否则会报错&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&amp;#34;当收到通知时，粉丝的反应&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; print(&lt;span style="color:#e6db74"&gt;f&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34; -&amp;gt; 粉丝 [&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;name&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;] 收到了！正在打开 App 查看 [&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;youtuber_name&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;] 的 [&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;video_title&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;]&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# 这里就是粉丝真正的反应逻辑，你可以改成发邮件、弹窗、播放声音等等&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# -------------------------------------------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 步骤3：运行逻辑（真正看到效果的地方）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# -------------------------------------------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 1. 创建主题和观察者&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;youtuber_A &lt;span style="color:#f92672"&gt;=&lt;/span&gt; Youtuber(&lt;span style="color:#e6db74"&gt;&amp;#34;老王&amp;#34;&lt;/span&gt;) &lt;span style="color:#75715e"&gt;# 创建一个YouTuber，名字叫“老王”&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;fan_1 &lt;span style="color:#f92672"&gt;=&lt;/span&gt; Fan(&lt;span style="color:#e6db74"&gt;&amp;#34;小明&amp;#34;&lt;/span&gt;) &lt;span style="color:#75715e"&gt;# 创建三个粉丝对象&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;fan_2 &lt;span style="color:#f92672"&gt;=&lt;/span&gt; Fan(&lt;span style="color:#e6db74"&gt;&amp;#34;小红&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;fan_3 &lt;span style="color:#f92672"&gt;=&lt;/span&gt; Fan(&lt;span style="color:#e6db74"&gt;&amp;#34;小刚&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 2. 观察者“订阅”主题&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;youtuber_A&lt;span style="color:#f92672"&gt;.&lt;/span&gt;attach(fan_1) &lt;span style="color:#75715e"&gt;# 小明和小红先订阅&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;youtuber_A&lt;span style="color:#f92672"&gt;.&lt;/span&gt;attach(fan_2)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 3. 主题发布新内容（状态变更）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;youtuber_A&lt;span style="color:#f92672"&gt;.&lt;/span&gt;notify(&lt;span style="color:#e6db74"&gt;&amp;#34;观察者模式入门&amp;#34;&lt;/span&gt;) &lt;span style="color:#75715e"&gt;# 老王发第一条视频，只有小明和小红收到&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 4. 另一个粉丝也订阅了&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;youtuber_A&lt;span style="color:#f92672"&gt;.&lt;/span&gt;attach(fan_3) &lt;span style="color:#75715e"&gt;# 小刚中途订阅&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 5. 小红取消订阅&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;youtuber_A&lt;span style="color:#f92672"&gt;.&lt;/span&gt;detach(fan_2) &lt;span style="color:#75715e"&gt;# 小红取关&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 6. 主题再次发布新内容&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;youtuber_A&lt;span style="color:#f92672"&gt;.&lt;/span&gt;notify(&lt;span style="color:#e6db74"&gt;&amp;#34;工厂模式yyds&amp;#34;&lt;/span&gt;) &lt;span style="color:#75715e"&gt;# 老王再发一条视频，只有小明和小刚收到&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;运行后你会看到输出：&lt;/p&gt;</description></item></channel></rss>